

# ì´ë©”ì¼ ë³¸ë¬¸ ë ˆì´ì•„ì›ƒ ê°œì„  ê³„íš

## ìš”ì•½
ì´ë©”ì¼ ë³¸ë¬¸ì˜ í†µê³„ ì¹´ë“œë¥¼ **2x2 ë ˆì´ì•„ì›ƒ**ìœ¼ë¡œ ì¬ë°°ì¹˜í•˜ê³ , ìƒë‹¨ì— **ìŠ¹ì¸ì¼ í•„í„° ê¸°ê°„**ì„ ëª…í™•í•˜ê²Œ í‘œì‹œí•©ë‹ˆë‹¤.

---

## ë³€ê²½ ë‚´ìš©

### í˜„ì¬ ìƒíƒœ
| í•­ëª© | í˜„ì¬ |
|---|---|
| í†µê³„ ë ˆì´ì•„ì›ƒ | ì²« ì¤„ 4ê°œ + ë‘˜ì§¸ ì¤„ 3ê°œ (7ê°œ ì¹´ë“œ) |
| ìŠ¹ì¸ì¼ í‘œì‹œ | í•„í„° ì¡°ê±´ ì¤‘ í•˜ë‚˜ë¡œ ì‘ê²Œ í‘œì‹œ |

### ë³€ê²½ í›„
| í•­ëª© | ë³€ê²½ í›„ |
|---|---|
| í†µê³„ ë ˆì´ì•„ì›ƒ | 2x2 (4ê°œ ì¹´ë“œë§Œ í‘œì‹œ) |
| ìŠ¹ì¸ì¼ í‘œì‹œ | í—¤ë” ì˜ì—­ì— í•„í„° ê¸°ê°„ í¬ê²Œ í‘œì‹œ |
| í‘œì‹œ í•­ëª© | ì „ì²´ìŠ¹ì¸, í•­ì•”ì œ, ì‹ ì•½, í¬ê·€ì˜ì•½í’ˆ |

---

## ì´ë©”ì¼ ë ˆì´ì•„ì›ƒ ë¯¸ë¦¬ë³´ê¸°

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  US FDA ìŠ¹ì¸ í˜„í™©                                                    â”‚
â”‚  ë¯¸êµ­ FDA ì „ë¬¸ì˜ì•½í’ˆ ìŠ¹ì¸ ë°ì´í„° ìš”ì•½                                â”‚
â”‚                                                                      â”‚
â”‚  ğŸ“… ìŠ¹ì¸ì¼: 2025-01-01 ~ 2025-12-31                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š ìš”ì•½ í†µê³„                                                        â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚     ì „ì²´ ìŠ¹ì¸       â”‚      í•­ì•”ì œ         â”‚                      â”‚
â”‚  â”‚        101         â”‚        21          â”‚                      â”‚
â”‚  â”‚   ìµœì´ˆìŠ¹ì¸: 24ê±´    â”‚   ë¹„í•­ì•”ì œ: 80ê±´    â”‚                      â”‚
â”‚  â”‚   ë³€ê²½ìŠ¹ì¸: 77ê±´    â”‚                    â”‚                      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
â”‚  â”‚    ì‹ ì•½ (Novel)     â”‚    í¬ê·€ì˜ì•½í’ˆ       â”‚                      â”‚
â”‚  â”‚        12          â”‚        39          â”‚                      â”‚
â”‚  â”‚ í•­ì•”ì œ 0 / ë¹„í•­ì•”ì œ 12â”‚   Orphan Drug      â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚           â”‚      ğŸ“Š ëŒ€ì‹œë³´ë“œì—ì„œ ìƒì„¸ í™•ì¸í•˜ê¸°      â”‚                 â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ë°œì†¡ ì‹œê°: 2026-02-08 14:30                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ìˆ˜ì • íŒŒì¼

### 1. `src/components/dashboard/EmailSend.tsx`
- stats ê°ì²´ì— ì„œë¸Œ í†µê³„ ì¶”ê°€ (ìµœì´ˆìŠ¹ì¸/ë³€ê²½ìŠ¹ì¸, ë¹„í•­ì•”ì œ, ì‹ ì•½ í•­ì•”ì œ/ë¹„í•­ì•”ì œ)
- ìŠ¹ì¸ì¼ ê¸°ê°„ ë¬¸ìì—´ ìƒì„± ë¡œì§ ì¶”ê°€
- `dateRangeText` í•„ë“œë¥¼ API ìš”ì²­ì— í¬í•¨

### 2. `supabase/functions/send-email/index.ts`
- EmailRequest ì¸í„°í˜ì´ìŠ¤ì— `dateRangeText` í•„ë“œ ì¶”ê°€
- HTML í…œí”Œë¦¿ì„ 2x2 ê·¸ë¦¬ë“œë¡œ ë³€ê²½
- í—¤ë”ì— ìŠ¹ì¸ì¼ ê¸°ê°„ í‘œì‹œ ì„¹ì…˜ ì¶”ê°€
- ê° ì¹´ë“œì— ì„œë¸Œí…ìŠ¤íŠ¸ ì¶”ê°€ (ì˜ˆ: ìµœì´ˆìŠ¹ì¸/ë³€ê²½ìŠ¹ì¸)

---

## ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

### EmailSend.tsx ë³€ê²½

```tsx
// ì¶”ê°€ í†µê³„ ê³„ì‚°
const stats = {
  total: filteredData.length,
  oncology: filteredData.filter((d) => d.isOncology).length,
  nonOncology: filteredData.filter((d) => !d.isOncology).length,
  novelDrug: filteredData.filter((d) => d.isNovelDrug).length,
  novelOncology: filteredData.filter((d) => d.isNovelDrug && d.isOncology).length,
  novelNonOncology: filteredData.filter((d) => d.isNovelDrug && !d.isOncology).length,
  orphanDrug: filteredData.filter((d) => d.isOrphanDrug).length,
  origCount: filteredData.filter((d) => !d.supplementCategory?.includes("SUPPL")).length,
  supplCount: filteredData.filter((d) => d.supplementCategory?.includes("SUPPL")).length,
};

// ìŠ¹ì¸ì¼ ê¸°ê°„ í…ìŠ¤íŠ¸ ìƒì„±
function getDateRangeText(filters: FilterState): string {
  if (filters.dateRange === "all") return "ì „ì²´ ê¸°ê°„";
  if (filters.dateRange === "custom") {
    const start = filters.startDate ? format(filters.startDate, "yyyy-MM-dd") : "";
    const end = filters.endDate ? format(filters.endDate, "yyyy-MM-dd") : "";
    return `${start} ~ ${end}`;
  }
  const rangeLabels = { "1m": "ìµœê·¼ 1ê°œì›”", "3m": "ìµœê·¼ 3ê°œì›”", ... };
  return rangeLabels[filters.dateRange];
}
```

### send-email Edge Function ë³€ê²½

```typescript
interface EmailRequest {
  to: string;
  subject: string;
  dateRangeText: string; // ìŠ¹ì¸ì¼ ê¸°ê°„
  stats: {
    total: number;
    oncology: number;
    nonOncology: number;
    novelDrug: number;
    novelOncology: number;
    novelNonOncology: number;
    orphanDrug: number;
    origCount: number;
    supplCount: number;
  };
}

// HTML í…œí”Œë¦¿: í—¤ë”ì— ìŠ¹ì¸ì¼ í‘œì‹œ, 2x2 ê·¸ë¦¬ë“œ
```

---

## êµ¬í˜„ ìˆœì„œ

1. `EmailSend.tsx` ìˆ˜ì •
   - ì¶”ê°€ í†µê³„ ê³„ì‚° (origCount, supplCount, nonOncology ë“±)
   - dateRangeText ìƒì„± í•¨ìˆ˜ ì¶”ê°€
   - API ìš”ì²­ì— ìƒˆ í•„ë“œ í¬í•¨

2. `send-email/index.ts` ìˆ˜ì •
   - EmailRequest ì¸í„°í˜ì´ìŠ¤ ì—…ë°ì´íŠ¸
   - HTML í…œí”Œë¦¿ 2x2 ê·¸ë¦¬ë“œë¡œ ì¬êµ¬ì„±
   - í—¤ë”ì— ìŠ¹ì¸ì¼ ê¸°ê°„ í‘œì‹œ

3. Edge Function ì¬ë°°í¬

4. í…ŒìŠ¤íŠ¸
   - ë‹¤ì–‘í•œ í•„í„° ì¡°ê±´ìœ¼ë¡œ ì´ë©”ì¼ ë°œì†¡ í™•ì¸

