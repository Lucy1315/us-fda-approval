# US FDA ìŠ¹ì¸ ì „ë¬¸ì˜ì•½í’ˆ ëŒ€ì‹œë³´ë“œ - ì›Œí¬í”Œë¡œìš° ìš”ì•½

## ğŸ“Š ì‹œìŠ¤í…œ ê°œìš”

ë¯¸êµ­ FDA ì „ë¬¸ì˜ì•½í’ˆ ìŠ¹ì¸ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ê³  ê´€ë¦¬í•˜ëŠ” ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ëŒ€ì‹œë³´ë“œ ì•„í‚¤í…ì²˜                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  í†µê³„ ì¹´ë“œ   â”‚    â”‚  í•„í„°ë§     â”‚    â”‚  ì°¨íŠ¸       â”‚     â”‚
â”‚  â”‚  StatCard   â”‚    â”‚  Filters    â”‚    â”‚  Charts     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              ë°ì´í„° í…Œì´ë¸” (DrugTable)                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Lovable Cloud (Backend)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  fda_data_versions â†â†’ fda_data_rows (ì˜êµ¬ ì €ì¥)       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¥ ì‚¬ìš©ì ê¶Œí•œ

| ê¸°ëŠ¥ | ì¼ë°˜ ì‚¬ìš©ì | ê´€ë¦¬ì |
|------|:-----------:|:------:|
| ëŒ€ì‹œë³´ë“œ ì¡°íšŒ | âœ… | âœ… |
| í•„í„°ë§/ê²€ìƒ‰ | âœ… | âœ… |
| ì‚¬ìš© ë°©ë²• | âœ… | âœ… |
| ì—‘ì…€ ë‹¤ìš´ë¡œë“œ | âœ… | âœ… |
| FDA ê²€ì¦ | âŒ | âœ… |
| ì—‘ì…€ ì—…ë¡œë“œ | âŒ | âœ… |
| í´ë¼ìš°ë“œ ì €ì¥ | âŒ | âœ… |

---

## ğŸ”„ ë°ì´í„° ê´€ë¦¬ ì›Œí¬í”Œë¡œìš°

### ê´€ë¦¬ì ì›Œí¬í”Œë¡œìš°

```mermaid
flowchart TD
    A[ğŸ“Š ëŒ€ì‹œë³´ë“œ ì ‘ì†] --> B{ê´€ë¦¬ì ë¡œê·¸ì¸?}
    B -->|ì•„ë‹ˆì˜¤| C[ì¡°íšŒ/ë‹¤ìš´ë¡œë“œë§Œ ê°€ëŠ¥]
    B -->|ì˜ˆ| D[ê´€ë¦¬ ê¸°ëŠ¥ í™œì„±í™”]
    
    D --> E[FDA ê²€ì¦]
    D --> F[ì—‘ì…€ ì—…ë¡œë“œ]
    
    E --> G[openFDA API ê²€ì¦]
    G --> H{ë¶ˆì¼ì¹˜ ë°œê²¬?}
    H -->|ì•„ë‹ˆì˜¤| I[ê²€ì¦ ì™„ë£Œ]
    H -->|ì˜ˆ| J[ìˆ˜ì • ì‘ì—…]
    
    J --> K[ìë™ ìˆ˜ì • / ìˆ˜ë™ ìˆ˜ì •]
    K --> L[ì ìš©í•˜ê¸° ë²„íŠ¼]
    L --> M[ë¡œì»¬ ìƒíƒœ ì—…ë°ì´íŠ¸]
    
    F --> N[ì—‘ì…€ íŒŒì‹±]
    N --> O[ê¸°ì¡´ ë°ì´í„°ì™€ ë³‘í•©]
    O --> M
    
    M --> P[í´ë¼ìš°ë“œ ì €ì¥]
    P --> Q[Supabase DB ì˜êµ¬ ì €ì¥]
    Q --> R[âœ… ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ë°˜ì˜]
    
    style A fill:#e1f5fe
    style R fill:#c8e6c9
    style P fill:#fff3e0
```

### ë°ì´í„° íë¦„

```mermaid
flowchart LR
    subgraph ë°ì´í„°ì†ŒìŠ¤
        A1[fdaData.ts<br/>ê¸°ë³¸ ë°ì´í„°]
        A2[Supabase<br/>í´ë¼ìš°ë“œ ë°ì´í„°]
    end
    
    subgraph ë¡œë”©ìš°ì„ ìˆœìœ„
        B1{í´ë¼ìš°ë“œ ë°ì´í„°<br/>ì¡´ì¬?}
    end
    
    subgraph ì•±ìƒíƒœ
        C1[React State<br/>data]
        C2[í•„í„°ë§/ê²€ìƒ‰]
        C3[filteredData]
    end
    
    subgraph UI
        D1[í†µê³„ ì¹´ë“œ]
        D2[ì°¨íŠ¸]
        D3[í…Œì´ë¸”]
    end
    
    A1 --> B1
    A2 --> B1
    B1 -->|ì˜ˆ| C1
    B1 -->|ì•„ë‹ˆì˜¤| C1
    C1 --> C2
    C2 --> C3
    C3 --> D1
    C3 --> D2
    C3 --> D3
    
    style A2 fill:#fff3e0
    style C1 fill:#e3f2fd
```

---

## ğŸ›  í•µì‹¬ ê¸°ëŠ¥ ìƒì„¸

### 1. FDA ê²€ì¦ (ê´€ë¦¬ì ì „ìš©)

```mermaid
sequenceDiagram
    participant Admin as ê´€ë¦¬ì
    participant UI as ê²€ì¦ UI
    participant Edge as Edge Function
    participant FDA as openFDA API
    
    Admin->>UI: FDA ê²€ì¦ í´ë¦­
    UI->>Edge: ë°ì´í„° ê²€ì¦ ìš”ì²­
    Edge->>FDA: API í˜¸ì¶œ
    FDA-->>Edge: ì‘ë‹µ
    Edge-->>UI: ë¶ˆì¼ì¹˜ ëª©ë¡
    UI-->>Admin: ê²°ê³¼ í‘œì‹œ
    
    alt ë¶ˆì¼ì¹˜ ë°œê²¬
        Admin->>UI: ìˆ˜ì • ì‘ì—…
        Admin->>UI: ì ìš©í•˜ê¸°
        UI->>UI: ë¡œì»¬ ìƒíƒœ ì—…ë°ì´íŠ¸
    end
```

### 2. ì—‘ì…€ ì—…ë¡œë“œ (ê´€ë¦¬ì ì „ìš©)

- **ë³‘í•© ë°©ì‹**: ê¸°ì¡´ ë°ì´í„° ì‚­ì œ ì—†ì´ ì‹ ê·œ í•­ëª©ë§Œ ì¶”ê°€
- **ì¤‘ë³µ í‚¤**: `í—ˆê°€ë²ˆí˜¸ + ìŠ¹ì¸ì¼ + ìŠ¹ì¸ìœ í˜•`
- **ì •ê·œí™”**: í—ˆê°€ë²ˆí˜¸ ì ‘ë‘ì–´ ì¤‘ë³µ ì œê±° (ì˜ˆ: "BLA BLA 123" â†’ "123")

### 3. í´ë¼ìš°ë“œ ì €ì¥ (ê´€ë¦¬ì ì „ìš©)

```mermaid
flowchart LR
    A[í˜„ì¬ ë°ì´í„°] --> B[persist-fda-data<br/>Edge Function]
    B --> C[ìƒˆ ë²„ì „ ìƒì„±<br/>fda_data_versions]
    C --> D[ë°ì´í„° í–‰ ì €ì¥<br/>fda_data_rows]
    D --> E[ë²„ì „ ê²Œì‹œ<br/>is_published = true]
    
    style B fill:#fff3e0
    style E fill:#c8e6c9
```

---

## ğŸ“ ì£¼ìš” íŒŒì¼ êµ¬ì¡°

```
src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ Index.tsx              # ë©”ì¸ í˜ì´ì§€ (ìƒíƒœ ê´€ë¦¬)
â”œâ”€â”€ components/dashboard/
â”‚   â”œâ”€â”€ Header.tsx             # í—¤ë” + ê¶Œí•œë³„ ë²„íŠ¼
â”‚   â”œâ”€â”€ Filters.tsx            # í•„í„°ë§ UI/ë¡œì§
â”‚   â”œâ”€â”€ DrugTable.tsx          # ë°ì´í„° í…Œì´ë¸”
â”‚   â”œâ”€â”€ StatCard.tsx           # í†µê³„ ì¹´ë“œ
â”‚   â”œâ”€â”€ TherapeuticAreaChart.tsx
â”‚   â”œâ”€â”€ FdaValidation.tsx      # FDA ê²€ì¦ (ê´€ë¦¬ì)
â”‚   â”œâ”€â”€ FdaNovelDrugsExport.tsx # ì—‘ì…€ ë‚´ë³´ë‚´ê¸°
â”‚   â”œâ”€â”€ ExcelUpload.tsx        # ì—‘ì…€ ì—…ë¡œë“œ (ê´€ë¦¬ì)
â”‚   â””â”€â”€ UsageGuide.tsx         # ì‚¬ìš© ê°€ì´ë“œ
â”œâ”€â”€ data/
â”‚   â””â”€â”€ fdaData.ts             # ê¸°ë³¸ ë°ì´í„° + íƒ€ì…
â””â”€â”€ hooks/
    â”œâ”€â”€ useAuth.ts             # ì¸ì¦/ê¶Œí•œ ê´€ë¦¬
    â””â”€â”€ useCloudData.ts        # í´ë¼ìš°ë“œ ë°ì´í„° ë¡œë“œ

supabase/functions/
â”œâ”€â”€ validate-fda-data/         # FDA API ê²€ì¦
â””â”€â”€ persist-fda-data/          # í´ë¼ìš°ë“œ ì €ì¥
```

---

## ğŸ” ë³´ì•ˆ ëª¨ë¸

```mermaid
flowchart TD
    A[ì‚¬ìš©ì ì ‘ì†] --> B{ì¸ì¦ ìƒíƒœ}
    B -->|ë¹„ë¡œê·¸ì¸| C[ì½ê¸° ì „ìš©<br/>public_fda_data_view]
    B -->|ë¡œê·¸ì¸| D{ì—­í•  í™•ì¸}
    D -->|ì¼ë°˜ ì‚¬ìš©ì| C
    D -->|ê´€ë¦¬ì| E[ì „ì²´ ê¶Œí•œ]
    
    E --> F[FDA ê²€ì¦]
    E --> G[ì—‘ì…€ ì—…ë¡œë“œ]
    E --> H[í´ë¼ìš°ë“œ ì €ì¥]
    
    subgraph RLSì •ì±…
        I[user_roles í…Œì´ë¸”]
        J[has_role í•¨ìˆ˜]
        K[is_admin í•¨ìˆ˜]
    end
    
    D -.-> I
    I -.-> J
    J -.-> K
    
    style C fill:#e3f2fd
    style E fill:#fff3e0
```

---

## ğŸ“ ë²„ì „ ì •ë³´

- **ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-01-29
- **ë°ì´í„° ìŠ¤í‚¤ë§ˆ ë²„ì „**: v2
- **ì£¼ìš” ë³€ê²½ì‚¬í•­**: 
  - ê´€ë¦¬ì ì „ìš© ê¸°ëŠ¥ ë¶„ë¦¬
  - í´ë¼ìš°ë“œ ì˜êµ¬ ì €ì¥ ì‹œìŠ¤í…œ ë„ì…
  - "ë°ì´í„° í™•ì •" íƒ­ ì œê±° (ì›Œí¬í”Œë¡œìš° ê°„ì†Œí™”)
